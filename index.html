---
layout: page
title: 'POC'
---

<h1>Bing</h1>
Just understanding what is possible.

<ul style="width: 100%;" id="results"></ul>

<script type="text/javascript">

  function getHostName(url) {
      var match = url.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);
      if (match != null && match.length > 2 && typeof match[2] === 'string' && match[2].length > 0) {
      return match[2];
      }
      else {
          return null;
      }
  }

  var query = getUrlVar('query');
  var token = getUrlVar('token');

  url = 'https://api.cognitive.microsoft.com/bing/v7.0/search?q=' + query  + '&count=25';

	var response = $.ajax({
     url: url,
     method: "get",
     headers: {
      'Ocp-Apim-Subscription-Key': token
     },
     success:function(response){
         results = response.webPages.value;
         for (i = 0; i < results.length; i++) {
           var name = results[i].name;
           var url = results[i].url;
           var snippet = results[i].snippet;
           var displayUrl = results[i].displayUrl;
           displayUrl = getHostName(displayUrl);
           var li = document.createElement("li");

           var a = document.createElement("a");
           a.setAttribute("href", url);
           var t = document.createTextNode(name);
           a.appendChild(t);
           li.appendChild(a);

           var a = document.createElement("a");
           a.setAttribute("href", displayUrl);
           var t = document.createTextNode(' (' + displayUrl + ')');
           a.appendChild(t);
           li.appendChild(a);

           var t = document.createTextNode(name);
           document.getElementById('results').appendChild(li);
         }
      },
      error: function(XMLHttpRequest, textStatus, errorThrown) {
          console.log("Status: " + textStatus);
          console.log("Error: " + errorThrown);
      }
  });

</script>
